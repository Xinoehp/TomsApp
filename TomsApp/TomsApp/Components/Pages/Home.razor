@page "/"
@using Blazored.LocalStorage
@using TomsApp.Models



<MudContainer MaxWidth="MaxWidth.Large" Class="pt-10">
    <MudPaper>
        <EditForm OnValidSubmit="Save" Model="_character">
            <MudPaper Class="mb-4">
                <MudText Typo="Typo.h2">General</MudText>

                <MudTextField T="string" @bind-Value="_character.Name" HelperText="Name" />
                @* <MudTextField T="string" Value="_character.Name" ValueChanged="s => ChangeValue(s)" HelperText="Name" /> *@
                <MudTextField T="string" @bind-Value="_character.Role" HelperText="Role" />
            </MudPaper>
            @* 			<MudPaper Class="mb-4">
            <MudText Typo="Typo.h2">Brawn</MudText>

            <MudNumericField T="int" @bind-Value="_character.Brawn.Stat" HelperText="Value" />
            <MudNumericField T="int" @bind-Value="_character.Brains.Stat" HelperText="Value" />
            <MudNumericField T="int" @bind-Value="_character.Perception.Stat" HelperText="Value" />
            <MudNumericField T="int" @bind-Value="_character.Reflexes.Stat" HelperText="Value" />
            <MudNumericField T="int" @bind-Value="_character.Allure.Stat" HelperText="Value" />
            <MudNumericField T="int" @bind-Value="_character.Guts.Stat" HelperText="Value" />

            <div>
            <MudText Typo="Typo.h3">Hacking</MudText>
            <div style="display: flex;">
            <MudSwitch @bind-Value="_character.Hacking.HasIt" Label="Do you have it?" />
            <MudSwitch @bind-Value="_character.Hacking.Advanced" Label="Advanced" />
            <MudSwitch @bind-Value="_character.Hacking.Specialized" Label="Specialized" />
            </div>
            </div>

            </MudPaper> *@

            <MudGrid Spacing="3">
                <MudItem xs="12" sm="4">
                    <MudPaper>
                        <MudText Typo="Typo.h2">Brawn</MudText>
                        <MudNumericField T="int" @bind-Value="_character.Brawn.Stat" HelperText="Stat" />
                        <MudList>
                            @foreach (Skill skill in _character.Brawn.Skills)
                            {
                                <MudListItem>
                                    <MudField>@skill.Name</MudField>
                                        <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="@(() => _character.Brawn.Skills.Remove(skill))" />
                                    </MudListItem>
                                <MudListItem>
                                    <MudCheckBox @bind-Value="@skill.Advanced"> Advanced? </MudCheckBox>
                                    <MudCheckBox @bind-Value="@skill.Specialised"> Specialised? </MudCheckBox>
                                </MudListItem>
                                <MudDivider />
                            }
                        </MudList>

                        <MudTextField @bind-Value="newSkill" Label="Skill" Variant="Variant.Text"></MudTextField>
                        <MudButton OnClick="@(() => AddSkill(_character.Brawn.Skills))">Add skill</MudButton>

                    </MudPaper>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <MudPaper>
                        <MudText Typo="Typo.h2">Brains</MudText>
                        <MudNumericField T="int" @bind-Value="_character.Brains.Stat" HelperText="Stat" />
                        <MudList>
                            @foreach (Skill skill in _character.Brains.Skills)
                            {
                                <MudListItem>
                                        <MudField>@skill.Name</MudField>
                                        <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="@(() => _character.Brains.Skills.Remove(skill))"/>
                                </MudListItem>
                                <MudListItem>
                                    <MudCheckBox @bind-Value="@skill.Advanced"> Advanced? </MudCheckBox>
                                    <MudCheckBox @bind-Value="@skill.Specialised"> Specialised? </MudCheckBox>
                                </MudListItem>
                                <MudDivider/>
                            }
                        </MudList>

                        <MudTextField @bind-Value="newSkill" Label="Skill" Variant="Variant.Text"></MudTextField>
                        <MudButton OnClick="@(() => AddSkill(_character.Brains.Skills))">Add skill</MudButton>
                        
                    </MudPaper>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <MudPaper>
                        <MudText Typo="Typo.h2">Perception</MudText>
                        <MudNumericField T="int" @bind-Value="_character.Perception.Stat" HelperText="Stat" />

                        <MudList>
                            @foreach (Skill skill in _character.Perception.Skills)
                            {
                                <MudListItem>
                                    <MudField>@skill.Name</MudField>
                                        <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="@(() => _character.Perception.Skills.Remove(skill))" />
                                    </MudListItem>
                                <MudListItem>
                                    <MudCheckBox @bind-Value="@skill.Advanced"> Advanced? </MudCheckBox>
                                    <MudCheckBox @bind-Value="@skill.Specialised"> Specialised? </MudCheckBox>
                                </MudListItem>
                                <MudDivider />
                            }
                        </MudList>

                        <MudTextField @bind-Value="newSkill" Label="Skill" Variant="Variant.Text"></MudTextField>
                        <MudButton OnClick="@(() => AddSkill(_character.Perception.Skills))">Add skill</MudButton>

                    </MudPaper>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <MudPaper>
                        <MudText Typo="Typo.h2">Reflexes</MudText>
                        <MudNumericField T="int" @bind-Value="_character.Reflexes.Stat" HelperText="Stat" />

                        <MudList>
                            @foreach (Skill skill in _character.Reflexes.Skills)
                            {
                                <MudListItem>
                                    <MudField>@skill.Name</MudField>
                                        <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="@(() => _character.Reflexes.Skills.Remove(skill))" />
                                    </MudListItem>
                                <MudListItem>
                                    <MudCheckBox @bind-Value="@skill.Advanced"> Advanced? </MudCheckBox>
                                    <MudCheckBox @bind-Value="@skill.Specialised"> Specialised? </MudCheckBox>
                                </MudListItem>
                                <MudDivider />
                            }
                        </MudList>

                        <MudTextField @bind-Value="newSkill" Label="Skill" Variant="Variant.Text"></MudTextField>
                        <MudButton OnClick="@(() => AddSkill(_character.Reflexes.Skills))">Add skill</MudButton>

                    </MudPaper>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <MudPaper>
                        <MudText Typo="Typo.h2">Allure</MudText>
                        <MudNumericField T="int" @bind-Value="_character.Allure.Stat" HelperText="Stat" />

                        <MudList>
                            @foreach (Skill skill in _character.Allure.Skills)
                            {
                                <MudListItem>
                                    <MudField>@skill.Name</MudField>
                                        <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="@(() => _character.Allure.Skills.Remove(skill))" />
                                    </MudListItem>
                                <MudListItem>
                                    <MudCheckBox @bind-Value="@skill.Advanced"> Advanced? </MudCheckBox>
                                    <MudCheckBox @bind-Value="@skill.Specialised"> Specialised? </MudCheckBox>
                                </MudListItem>
                                <MudDivider />
                            }
                        </MudList>

                        <MudTextField @bind-Value="newSkill" Label="Skill" Variant="Variant.Text"></MudTextField>
                        <MudButton OnClick="@(() => AddSkill(_character.Allure.Skills))">Add skill</MudButton>

                    </MudPaper>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <MudPaper>
                        <MudText Typo="Typo.h2">Guts</MudText>
                        <MudNumericField T="int" @bind-Value="_character.Guts.Stat" HelperText="Stat" />

                        <MudList>
                            @foreach (Skill skill in _character.Guts.Skills)
                            {
                                <MudListItem>
                                    <MudField>@skill.Name</MudField>
                                        <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="@(() => _character.Guts.Skills.Remove(skill))" />
                                    </MudListItem>
                                <MudListItem>
                                    <MudCheckBox @bind-Value="@skill.Advanced"> Advanced? </MudCheckBox>
                                    <MudCheckBox @bind-Value="@skill.Specialised"> Specialised? </MudCheckBox>
                                </MudListItem>
                                <MudDivider />
                            }
                        </MudList>

                        <MudTextField @bind-Value="newSkill" Label="Skill" Variant="Variant.Text"></MudTextField>
                        <MudButton OnClick="@(() => AddSkill(_character.Guts.Skills))">Add skill</MudButton>

                    </MudPaper>
                </MudItem>
            </MudGrid>




            <MudButton Color="Color.Primary" ButtonType="ButtonType.Submit">Save</MudButton>

        </EditForm>
    </MudPaper>
</MudContainer>

